---
title: "Golang"
---
<table border="1" style={{margin: "10px 0", textAlign: "center"}}>
    <thead>
    <tr>
        <th style={{padding:"8px 15px"}}>Traces</th>
        <th style={{padding:"8px 15px"}}>Metrics</th>
        <th style={{padding:"8px 15px"}}>App Logs</th>
        <th style={{padding:"8px 15px"}}>Custom Logs</th>
        <th style={{padding:"8px 15px"}}>Profiling</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td><span style={{
            background: "url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHZpZXdCb3g9IjAgMCAxOSAxOSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTkuNDI2NTcgMTguNjA4QzQuMzUyNDIgMTguNjA4IDAuMjQxNDU1IDE0LjQ5NyAwLjI0MTQ1NSA5LjQyMjg1QzAuMjQxNDU1IDQuMzQ4NjkgNC4zNTI0MiAwLjIzNzczMiA5LjQyNjU3IDAuMjM3NzMyQzE0LjUwMDcgMC4yMzc3MzIgMTguNjExNyA0LjM0ODY5IDE4LjYxMTcgOS40MjI4NUMxOC42MTE3IDE0LjQ5NyAxNC41MDA3IDE4LjYwOCA5LjQyNjU3IDE4LjYwOFoiIGZpbGw9IiMyREE0NEUiLz4KPHBhdGggZD0iTTguMjU0OCAxMi4wNDQzTDUuNDU0NTkgOS4yNDQxNCIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxLjMxMjE2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPHBhdGggZD0iTTEzLjg1NTEgNi40NDM5MUw4LjI1NDY0IDEyLjA0NDMiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMS4zMTIxNiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=) no-repeat",
            width: "20px",
            height: "20px",
            display: "inline-block",
        }}/></td>
        <td><span style={{
            background: "url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHZpZXdCb3g9IjAgMCAxOSAxOSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTkuNDI2NTcgMTguNjA4QzQuMzUyNDIgMTguNjA4IDAuMjQxNDU1IDE0LjQ5NyAwLjI0MTQ1NSA5LjQyMjg1QzAuMjQxNDU1IDQuMzQ4NjkgNC4zNTI0MiAwLjIzNzczMiA5LjQyNjU3IDAuMjM3NzMyQzE0LjUwMDcgMC4yMzc3MzIgMTguNjExNyA0LjM0ODY5IDE4LjYxMTcgOS40MjI4NUMxOC42MTE3IDE0LjQ5NyAxNC41MDA3IDE4LjYwOCA5LjQyNjU3IDE4LjYwOFoiIGZpbGw9IiMyREE0NEUiLz4KPHBhdGggZD0iTTguMjU0OCAxMi4wNDQzTDUuNDU0NTkgOS4yNDQxNCIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxLjMxMjE2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPHBhdGggZD0iTTEzLjg1NTEgNi40NDM5MUw4LjI1NDY0IDEyLjA0NDMiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMS4zMTIxNiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=) no-repeat",
            width: "20px",
            height: "20px",
            display: "inline-block",
        }}/></td>
        <td>-</td>
        <td><span style={{
            background: "url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHZpZXdCb3g9IjAgMCAxOSAxOSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTkuNDI2NTcgMTguNjA4QzQuMzUyNDIgMTguNjA4IDAuMjQxNDU1IDE0LjQ5NyAwLjI0MTQ1NSA5LjQyMjg1QzAuMjQxNDU1IDQuMzQ4NjkgNC4zNTI0MiAwLjIzNzczMiA5LjQyNjU3IDAuMjM3NzMyQzE0LjUwMDcgMC4yMzc3MzIgMTguNjExNyA0LjM0ODY5IDE4LjYxMTcgOS40MjI4NUMxOC42MTE3IDE0LjQ5NyAxNC41MDA3IDE4LjYwOCA5LjQyNjU3IDE4LjYwOFoiIGZpbGw9IiMyREE0NEUiLz4KPHBhdGggZD0iTTguMjU0OCAxMi4wNDQzTDUuNDU0NTkgOS4yNDQxNCIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxLjMxMjE2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPHBhdGggZD0iTTEzLjg1NTEgNi40NDM5MUw4LjI1NDY0IDEyLjA0NDMiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMS4zMTIxNiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=) no-repeat",
            width: "20px",
            height: "20px",
            display: "inline-block",
        }}/></td>
        <td><span style={{
            background: "url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHZpZXdCb3g9IjAgMCAxOSAxOSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTkuNDI2NTcgMTguNjA4QzQuMzUyNDIgMTguNjA4IDAuMjQxNDU1IDE0LjQ5NyAwLjI0MTQ1NSA5LjQyMjg1QzAuMjQxNDU1IDQuMzQ4NjkgNC4zNTI0MiAwLjIzNzczMiA5LjQyNjU3IDAuMjM3NzMyQzE0LjUwMDcgMC4yMzc3MzIgMTguNjExNyA0LjM0ODY5IDE4LjYxMTcgOS40MjI4NUMxOC42MTE3IDE0LjQ5NyAxNC41MDA3IDE4LjYwOCA5LjQyNjU3IDE4LjYwOFoiIGZpbGw9IiMyREE0NEUiLz4KPHBhdGggZD0iTTguMjU0OCAxMi4wNDQzTDUuNDU0NTkgOS4yNDQxNCIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxLjMxMjE2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPHBhdGggZD0iTTEzLjg1NTEgNi40NDM5MUw4LjI1NDY0IDEyLjA0NDMiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMS4zMTIxNiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=) no-repeat",
            width: "20px",
            height: "20px",
            display: "inline-block",
        }}/></td>
    </tr>
    </tbody>
</table>

This guide walks you through setting up Application Performance Monitoring (APM) on a Go programming language (Golang) application. These instructions can also be found on the Installation page in your Middleware Account. View example code [here](https://github.com/middleware-labs/demo-apm/tree/master/golang).

## Prerequisites
* The Middleware Host Agent (MW Agent). To install the MW Agent please see our <a href="https://docs.middleware.io/docs/agent-installation/overview"> installation guides </a>. 
* One of the two latest Golang stable releases. Check <a href="https://go.dev/doc/devel/release"> Golangâ€™s docs </a> for details. You can check your Golang version with the following command. .
```
go version
```

## Step 1: Install Golang package
Run the following command in your terminal.

```go
go get github.com/middleware-labs/golang-apm
```

## Step 2: Import Tracker
Add the following lines to the beginning of your application code base.

```go
import (
    track "github.com/middleware-labs/golang-apm/tracker"
)
```

Add the following snippet to your main function. The access token is your account key, which can be found on the Installation page. If using a Golang web framework, additional code may be required, see Step 3. 
```go
go track.Track(
    track.WithConfigTag("service", {APM-SERVICE-NAME}),
    track.WithConfigTag("projectName", {APM-PROJECT-NAME}),
    track.WithConfigTag("accessToken", "<xxxxxxxxxx>"),
)
```



## Step 4: Container Variables
Applications running in a container require an additional environment variable. If your application is not running in a container, move to Step 5. 

For Docker containers, add the following environment variable to your application.
```bash
MW_AGENT_SERVICE=DOCKER_BRIDGE_GATEWAY_ADDRESS
```
<Note> docker bridge gateway address is the IP address of the gateway between the Docker host and the bridge network, which is 172.17.0.1 by default. </Note>

```bash
kubectl get service --all-namespaces | grep mw-service
```

Then add the following environment variable to your application deployment YAML file. 
```bash
MW_AGENT_SERVICE=mw-service.mw-agent-ns.svc.cluster.local
```



## Step 5: Capture Application Data

### Traces
Distributed tracing is automatically enabled upon completion of Step 2.

### Custom Logs
To ingest custom logs into Middleware, utilize the following functions inside your logging method based on desired log severity levels.
```go
"github.com/middleware-labs/golang-apm/logger"

....

logger.Error("Error")
logger.Info("Info")
logger.Warn("Warn")
```

### Profiling
Application Profiling is auto-configured upon completing Step 2.

### Stack Traces
Use the track.RecordError(ctx,error) method to record a stack trace when an error occurs. See an example of this method below. 

```go

app.get('/hello', (req, res) => {
    ctx := req.Context()
    try {
        throw ("error");
    } catch (error) {
        track.RecordError(ctx, error)
    }
})
```





