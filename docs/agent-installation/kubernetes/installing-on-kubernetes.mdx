---
title: "Installing on Kubernetes"
description: "Use our one-step easy installation "
---


<h2>Prerequisites</h2>


<ol>
    <li>Create a <a href="https://app.middleware.io/auth/register/" rel="nofollow noopener noreferrer" target="_blank" translate="no">Middleware account</a></li>
    <li>Keep logging into your account  </li>
    <li>Access to Kubernetes cluster and Kubernetes client (ie. : <a href="https://kubernetes.io/docs/reference/kubectl/kubectl/" rel="nofollow noopener noreferrer" target="_blank" translate="no">kubectl</a>) </li>
</ol>
<h2>Use our one-step easy installation </h2>

<p>To install a Middleware agent on a host, copy the Installation command and paste it into the command prompt. Your command will look like the following example, and it will include your API key.</p>


    <img src="/images/agent-installation/one-step-easy-install.png" />

<p>You can use one-step auto instrumentation as follow</p>

```javascript Shell
MW_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxx TARGET=https://uid.middleware.io:443 bash -c "$(curl -L https://install.middleware.io/scripts/mw-vision.sh)"
```
<p style={{fontSize:"14px",backgroundColor:"rgb(248, 248, 248)",marginBottom:"10px"}}>This script will install our all-in-one helm chart into your k8s cluster.</p>
<p style={{fontSize:"14px",backgroundColor:"rgb(248, 248, 248)",marginBottom:"10px"}}>Once the script is executed, you will be given instructions to open our 'Middleware Vision UI'.</p>
<p style={{fontSize:"14px",backgroundColor:"rgb(248, 248, 248)",marginBottom:"10px"}}>When you open the Vision UI (using port-forward), you will see all the applications running in your cluster along with their detected programming language</p>
<p style={{fontSize:"14px",backgroundColor:"rgb(248, 248, 248)",marginBottom:"10px"}}>Select all the applications that you want to monitor and press 'Save Changes', and you will see their distributed traces in the Middleware dashboard.</p>

OR use following command to install agent on Kubernetes
```javascript Shell
MW_API_KEY=xxxxxxxxxxxxxxxxxx TARGET=https://uid.middleware.io:443 bash -c "$(curl -L https://install.middleware.io/scripts/yaml-install.sh)"
```
<p style={{fontSize:"14px",backgroundColor:"rgb(248, 248, 248)",marginBottom:"10px"}}>This script will install a Kubernetes daemonset into your k8s cluster.</p>
<p style={{fontSize:"14px",backgroundColor:"rgb(248, 248, 248)",marginBottom:"10px"}}>This agent is mainly created to monitor the data of your Kubernetes infrastucture.</p>
<p style={{fontSize:"14px",marginBottom:"10px"}}>* Replace the MW_API_KEY value with your API key or directly copy the full command with the API key from the <a href="https://app.middleware.io/auth/login" rel="nofollow noopener noreferrer" target="_blank" translate="no">installation menu.</a></p>
<p style={{fontSize:"14px",marginBottom:"10px"}}>* Replace "uid" with the text in the URL (ex URL is "s05zpimz.middleware.io" , here s05zpimz is uid.)</p>

<Note>Note: You must not run more than one MW Agent per cluster. Running multiple Agents may result in unexpected behavior.</Note>

<h2>Verify the status for K8s Auto-instrument Agent </h2>
<p>Run this command to check the status of main daemonset component, which will be collecting data from your cluster</p>


```javascript Shell
kubectl get daemonset/vision-data-collection -n mw-vision
```

<p>Expected Output:</p>

<table><tbody><tr><td>Name</td><td>Desired</td><td>Current</td><td>Ready</td><td>Up to Date</td><td>Available&nbsp;</td><td>Node selector</td><td>Age</td></tr><tr><td>Vision-data-collection</td><td>7</td><td>7</td><td>7</td><td>7</td><td>7</td><td>&lt;none&gt;</td><td>111s</td></tr></tbody></table>



<p>If you have "N" number of k8s nodes, You should see "N" ready pods.</p>

<h2>Verify Status for K8s Infrastructure Agent</h2>
<p>Run this command to check the status of main daemonset component, which will be collecting data from your cluster</p>

```javascript Shell
kubectl get daemonset/mw-kube-agent -n mw-agent-ns
```

<p>Expected Output:</p>

<table><tbody><tr><td >Name</td><td >Desired</td><td>Current</td><td>Ready</td><td >Up-to-date</td><td>Available&nbsp;</td><td>Non selector</td><td>Age</td></tr><tr><td>mw-kube-agent</td><td>7</td><td>7</td><td>7</td><td>7</td><td>7</td><td>&lt;none&gt;</td><td>111s</td></tr></tbody></table>

<p>If you have "N" number of k8s nodes, You should see "N" ready pods.</p>

<h2>Uninstall the Middleware agent</h2>
<p>To uninstall the middleware agent, please use the following command.</p>

```javascript Shell
bash -c "$(curl -L https://install.middleware.io/scripts/yaml-uninstall.sh)"
```









