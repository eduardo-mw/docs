---
title: Installing RUM
sidebarTitle: "RUM"
---

Middleware Real User Monitoring (RUM) provides insights into your application or website through detailed data on user interactions and frontend performance. With real-time data on page load times, errors, and more you can quickly identify and resolve performance issues to improve user experience and engagement. Check out the video below for more information.

<a href="https://www.loom.com/share/ed0f136a6dd7436ba951356c936e0ca3" target="_blank">
  <img height="200" noZoom src="/images/rum_0.png" />
</a>

# Install
This guide walks you through setting up Real User Monitoring (RUM) with JavaScript. These instructions can also be found on the Installation page in your Middleware Account.

<AccordionGroup>
    <Accordion title="Step 1: Create Application Reference">
        Navigate to the Installation page in your Middleware Account. In the Real User Monitoring section, select `Create New Application` and provide the application name, origin(s) and Trace Propogation Target(s) to whitelist. Multiple origins can be listed as a comma-separated list.
    </Accordion>

    <Accordion title="Step 2: Import Javascript CDN">
        Add the following script tag to the head section of your index.html file. The tag can be copied directly from the Installation page upon completing Step 1.
        ```javascript HTML
        <script src="https://cdnjs.middleware.io/browser/libs/0.0.1/middleware-rum.min.js" type="text/javascript"></script>
        ```
    </Accordion>

    <Accordion title="Step 3: Initialize the SDK">
        Add the following lines in your index.html file below the script tag entered in Step 2. We recommend copying directly from the Installation page; select the appropriate Application from the list and copy the code snippet. The `window.Middleware` attribute is set in the script from Step 2. 

        In the example below, env and recording are optional. Recording set to 1 is the default value and records the entire user session. To track only browser traces and errors set recording to 0.

        ```javascript JavaScript
        <script>
            if (window.Middleware){
                Middleware.track({
                    serviceName: "service_name",
                    accountKey: "account_key",
                    target:"https://<UID>.middleware.io",
                    env: "production",
                    recording: "1"
                })
            }
        </script>
        ```
    </Accordion>

    <Accordion title="Step 4: Add User Information [optional]">
        To gather user details add key-value pairs, as shown below. Any user metadata can be defined as a key-value pair.

        ```javascript JavaScript
        if(window.Middleware){
        ...
        defaultAttributes: { 
            name: 'John Doe', 
            email: 'john@email.com', 
            user_type: 'admin', // it can be key value pairs
        }
        }
        ```
        If you need to define attributes post initialization of the SDK, utilize the 'Middleware.setAttributes' method, as exemplified in the following example.

        ```javascript JavaScript
        <script>
        if(window.Middleware){
                Middleware.setAttributes({
                    name: 'John Doe',
                    email: 'john@email.com',
                    user_type: 'admin',
                })
            }
        </script>
        ```
        Once RUM is configured, metrics should begin appearing on the RUM Dashboard in Middleware within a few minutes. For more information on the RUM Dashboards see [here](https://docs.middleware.io/docs/rum/rum-middleware).
    </Accordion>

    <Accordion title="Step 5: Add Custom Logs [optional]">
        Use these functions to keep track of different types of issues in your system, making it easier to monitor and fix problems.

        ```javascript JavaScript
        <script>
        if(window.Middleware){
            Middleware.error("Your error message")
            Middleware.error(new Error("Your error message"))
            Middleware.info("info message")
            Middleware.warn("warn message")
            Middleware.debug("debug message")
            }
        </script>
        ```
    </Accordion>
</AccordionGroup>

# Connect RUM to Tracing

RUM Tracing allows you to gain insight into the specific actions of your users. You can watch time-stamped videos of user's website interactions, pinpoint performance bottlenecks across your platform, and identify the major causes of customer drop off.

The following installation uses OpenTelemetry B3 Propagator heads. Learn more about B3 Propagation [here](https://github.com/openzipkin/b3-propagation).

<Note> You must have a Middleware APM Agent installed in order to use the tracing feature. Install a Middleware APM [here](/apm-configuration/apm_overview). </Note>

<AccordionGroup>
    <Accordion title="Step 1: Modify Middleware SDK">
        Add `tracePropagationTargets` to your SDK from [Step 3](#step-3-initialize-the-sdk) of the RUM Installation. The `tracePropagationTargets` value must be in regex format.

        <Warning> The Middleware JavaScript client is by default configured with `b3` headers. You can change your headers by adding `tracePropagationFormat` to change the headers to `w3c` or `all`. </Warning>

        ```javascript JavaScript
        <script>
            if (window.Middleware){
                Middleware.track({
                    serviceName: "service_name",
                    accountKey: "account_key",
                    target: "https://<UID>.middleware.io",
                    env: "production",
                    recording: "1",
                    tracePropagationTargets: [/localhost:3000/i, /api.domain.com/i],
                    tracePropagationFormat: "w3c"
                })
            }
        </script>
        ```
    </Accordion>

    <Accordion title="Step 2: Modify APM SDK">
        In order to enable Trace Propagation, some languages require the `OTEL_PROPAGATORS=b3` environment variable. Those languages are called out in the table below. All other langugages will work with the standard APM install.
    </Accordion>
</AccordionGroup>
  
# Supported APMs
|       | | | |
| :----:| :--:|:--:| :--:|
| **Language**                                |    **Supported**   | **APM Version** | **Environment Variable** |
| [Cloudflare](/apm-configuration/cloudflare) |           ✖️        |   ✖️             |        ✖️             |
| [Go](/apm-configuration/go)           |                ✅        |   `>= 1.1.100`     |        ✖️             |
| [Java](/apm-configuration/java)         |              ✅        |    ✖️            |         ✅               | 
| [.NET](/apm-configuration/dotnet)       |              ✅        |     ✖️           |       ✅                 |
| [Next.js](/apm-configuration/next-js)      |           ✅        |     ✖️           |            ✖️             |
| [Node.js](/apm-configuration/node-js)      |           ✅        | `>= 1.2.5`         |            ✖️             |
| [PHP](/apm-configuration/php)          |                ✖️        |    ✖️            |            ✖️             |
| [Python](/apm-configuration/python)       |            ✅        | `>= 0.3.2`         |            ✖️             |
| [Ruby](/apm-configuration/ruby)         |              ✅        | `>= 2.1.0`         |   ✅  |
| [Vercel](/apm-configuration/vercel-integration)   |     ✅        |    ✖️            |            ✖️             |

# Access RUM From Trace List

To access your Session Replay data, navigate to the APM section, select the Trace List tab and choose a trace to view your data.

<Note> For more information about using RUM, head to the [RUM Workflow page](/workflow/using-rum). </Note>

<img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNnRxNzFmajVnYXZpZW8xbGR6OHF3NjZ6aWozYXRjZmZ5OHlnc3c4eCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/AQhJ5ezOms5ncTNH7a/giphy.gif" width="900" height="900" />


<Note> Need assistance or want to learn more about Middleware? Contact us at support[at]middleware.io. </Note>
