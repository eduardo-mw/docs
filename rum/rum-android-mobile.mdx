---
title: "Mobile RUM - Android SDK"
sidebarTitle: "Mobile RUM"
---

# Overview
The Mobile RUM SDK provides a customizable suite of tools to analyze and optimize the performance of Android applications. This guide ensures the SDK is initialized and configured for real-time monitoring and telemetry transmission to the Middleware platform throughout the app's lifecycle. Isolate ANR and network changes, quickly detect application crashes, identify slow or frozen frames and more.

# Prerequisites

1. Android SDK Version `>21`

# Install

### Step 1: Install Middleware Android SDK

```java Java
implementation 'io.middleware.android:sdk:+'
```

### Step 2: Add Application Instrumentation Config

```Java Java
class MyApplication extends Application {
   private final String targetUrl = "<target-url>";
   private final String rumAccessToken = "<your-access-token>";

   @Override
   public void onCreate() {
      super.onCreate();

    Middleware.builder()
        .setTarget(targetUrl)
        .setServiceName("sample-android-app-1")
        .setProjectName("Mobile-SDK-Android")
        .setRumAccessToken(rumAccessToken)
        .setSlowRenderingDetectionPollInterval(Duration.ofMillis(1000))
        .setDeploymentEnvironment("PROD")
        .build(this);
   }
}
```

#### Modify Configuration Methods

Understand the behavior of your RUM Android application with the following methods and set particular attributes related to telemetry ingestion, monitoring, and instrumentation.

| Method | Description |
| :---- |  :--------   | 
| `setRumAccessToken(String)` | Authorizes client to send telemetry to Middleware |
| `setTarget(String)` | Sets target URL to recieve telemetry from |
| `setService(String)` | Sets the service name of your application |
| `setDeploymentEnvironment(String)` | Sets environment attribute on spans generated by instrumentation ( e.g. `PROD`, `DEV`) |
| `disableCrashReporting()` | Disables crash reporting which is enabled by default |
| `disableAnrDetection()` | Disable Application Not Responding (ANR) detection which is enabled by default |
| `disableNetworkMonitor()` | Disable network change detection which is enabled by default |
| `disableSlowRenderingDetection()` | Disable slow or frozen frame render detection which is enabled by default |
| `setSlowRenderingDetectionPollInterval(Duration)` | Sets the default polling for slow or frozen render detection. Default detection interval is 1000 milliseconds |



### Step 3: HTTP Instrumentation Config [Optional]

Integrate with OkHTTP3 to monitor HTTP events across user devices.

```java OkHTTP3
private Call.Factory buildOkHttpClient(Middleware middleware) {
   return middleware.createRumOkHttpCallFactory(new OkHttpClient());
}
```

# Manually Instrument Android Application

### Step 1: Set Global Attributes

Global attributes serve as metadata or contextual information that can be attached to telemetry, traces, or logs collected by the instrumentation framework or SDK. They are key-value pairs that provide additional details about the application, device, user session, or environment.

```java Java
Middleware.builder()
        .setGlobalAttributes(
            Attributes.builder()
                    .put("key", "value")
                    .put(StandardAttributes.APP_VERSION, BuildConfig.VERSION_NAME)
                    .build());
```

<Accordion title="Send Custom Events">
  Send custom events and workflows using `addEvent` and `startWorkflow` APIs

  #### Send Custom Events
    ```java Java
    Middleware.getInstance().addEvent("You clicked on Button", BUTTON_ATTRIBUES);
    ```

  #### Start Custom Event Workflow
    ```java Java
    Span loginWorkflow = Middleware.getInstance().startWorkflow("User Login Flow");
    ```

  #### End Custom Event Workflow
    ```java Java
    loginWorkflow.end();
    ```

</Accordion>

<Accordion title="Configure Error Reporting">
  Use `addException(Throwable)` to report exceptions, errors, and display messages on the Middleware dashboard
  ```java Java
  Middleware.getInstance().addException(new RuntimeException("Something went wrong!"), Attributes.empty())
  ```
</Accordion>

<Accordion title="Create Custom Logs">
  Add custom logs to display on your Middleware dashboard such as debug, error, warning, and info 
  ```java Java
  Middleware logInstance = Middleware.getInstance();
  logInstance.d("TAG", "I am debug");
  logInstance.e("TAG", "I am error");
  logInstance.i("TAG", "I am info");
  logInstance.w("TAG", "I am warning");
  ```
  
</Accordion>

# Attributes

<Accordion title="Default Attributes">

  The following attributes are provided by the Android SDK by default

  |   __Name__             |    __Type__    |                     __Description__                      | 
  | :--------------------: | :-------------:| :------------------------------------------------------  |
  | `project.name` , `app` |      String    |  Defines the project name, used as `projectName(String)` |
  |     `service.name`     |      String    |  Defines the service name, used as `serviceName(String)` |
  |      `session.id`      |      String    |  Random session identifier generated by Middleware SDK   |
  |  `rum.sdk.version`     |      String    | Version of Middleware SDK                                |

</Accordion>


<Accordion title="Resource Attributes">

  |         __Name__          |    __Type__    |                     __Description__                         | 
  | :----------------------:  | :-------------:| :------------------------------------------------------     |
  | `deployment.environment`  |      String    |  Name of the deployment environment. Example: `DEV`, `PROD` |
  | `device.model.identifier` |      String    |  Model identifier of device. Example : `Moto-G30`           |
  | `device.model.name`       |      String    |  Name of device. Example : `ONEPLUS A600`                   |
  | `device.manufacturer`     |      String    |  Name of device manufacturer. Example: `OnePlus`            |
  | `os.name`                 |      String    |  Name of operating system. Sets to `Android`                |
  | `os.description`          |      String    |  Detail description for operation system used. Example: `Android Version 11 (Build RKQ1.201217.002 API level 30)` |
  | `os.type`                 |      String    |  Type of used. Sets to `Linux`  |
  | `os.version`              |      String    |  Defines which operation system version is used. Example for Android version used is `11` |
</Accordion>

<Accordion title="Crash Reporting">
  |         __Name__          |    __Type__    |                     __Description__                                             | 
  | :----------------------:  | :-------------:| :----------------------------------------------------------------------------- |
  | `thread.id`               |      Integer   |  ID of the current managed thread, as opposed to the operating system thread ID |
  | `thread.name`             |      String    |  Name of the thread                                                             |
  | `exception.message`       |      String    |  Message of the exception                                                       |
  | `exception.type`          |      String    |  Type of the exception                                                          |
  | `exception.stacktrace`    |      String    |  Stack trace for the exception                                                  |
  | `exception.escaped`       |      String    |  Sets `true`, denoting the uncaught exception, such as a crash occurring        |
  | `component`               |      String    |  Sets `crash`                                                                   |
  | `event.type`              |      String    |  Sets `error`                                                                   |
</Accordion>


<Accordion title="Network Monitoring">
  |         __Name__          |    __Type__    |                     __Description__                                             | 
  | :----------------------:  | :-------------:| :----------------------------------------------------------------------------- |
  | `network.status`          |      String    |  Network status. Either `lost` or `available`                                   |
  | `network.connection.type` |      String    |  Connection type used. Possible values `wifi`, `cell`, `unavailable`, `unknown` |
  | `network.carrier.name`    |      String    |  Name of the carrier being used                                                 |
</Accordion>



<Accordion title="Application Not Responding (ANR)">
  |         __Name__          |    __Type__    |                     __Description__                                             | 
  | :----------------------:  | :-------------:| :-----------------------------------------------------------------------------  |
  | `exception.stacktrace`    |      String    | Stack trace for the exception                                                   |
  | `component`               |      String    | Sets `error`                                                                    |
  | `event.type`              |      String    | Sets `error`                                                                    |
</Accordion>


<Accordion title="Slow Rendering detection">
  |         __Name__          |    __Type__    |                     __Description__                                             | 
  | :----------------------:  | :-------------:| :-----------------------------------------------------------------------------  |
  | `count`                   |     Integer    |  Number of observed slow or frozen frames during a single interval. Intervals last 1 second by default. To change the polling interval duration, pass a positive duration, in milliseconds, to the `slowRenderingDetectionPollInterval(Duration)` setting |
</Accordion>


<Accordion title="HTTP Client Attributes">
  |         __Name__               |    __Type__    |                     __Description__                                             | 
  | :----------------------:       | :-------------:| :-----------------------------------------------------------------------------  |
  | `http.method`                  |      String    |  `GET`, `POST`, `HEAD`                                                          |
  | `http.url`                     |      String    |  `https://foo.bar/address?q=value#hash`                                         |
  | `http.flavor`                  |      String    |  `1.0`                                                                          |
  | `http.status_code`             |      Integer   |  `200`, `404`, `418`                                                            |
  | `http.response_content_length` |      Integer   |  `3495`(bytes)                                                                  |
  | `http.user_agent`              |      String    |  `CERN-LineMode/2.15 libwww/2.17b3`                                             |
  | `net.transport`                |      String    |  `IP.TCP`                                                                       |
  | `net.peer.name`                |      String    |  `example.com`                                                                  |
  | `net.peer.port`                |      Integer   |  `80`, `8080`, `443`                                                            |
  | `component`                    |      String    |  Sets `http`                                                                    |
</Accordion>

<Accordion title="Activity Lifecycle Monitoring">
  By default it Activity lifecycle monitoring is enabled. It involves generating spans whenever an activity undergoes a state change. The name of an activity lifecycle span can vary based on its state:

  - `Created`: Activity starts for the first time.

  - `Restarted`:Activity restarts after being stopped.

  - `Resumed`: Activity resumes after a pause.

  - `Paused`: Activity is paused.

  - `Stopped`: Activity stops.

  - `Destroyed`: Activity is destroyed.

  |         __Name__               |    __Type__    |                     __Description__                                             | 
  | :----------------------:       | :-------------:| :-----------------------------------------------------------------------------  |
  | `component`                    |      String    |  Sets `ui`                                                                      |
  | `activityName`, `activity.name`|      String    |  Name of the activity class. Example: `MainActivity`                            |
</Accordion>



<Accordion title="Fragment Lifestyle Monitoring">
  Fragment lifecycle monitoring involves generating spans whenever an fragment undergoes a state change. The name of an fragment lifecycle span can vary based on its state::

  - `Created`: Before the fragment gets attached to the Android context.

  - `Restored`: Fragment recreates its view.

  - `Resumed`: Fragment is resumed after a pause.

  - `Paused`: Fragment is paused.

  - `ViewDestroyed`: The view of the fragment is destroyed

  - `Destroyed`: Fragment is destroyed.

  - `Detached`: Fragment is detached from the Android context.

  |         __Name__               |    __Type__    |                     __Description__                                             | 
  | :----------------------:       | :-------------:| :-----------------------------------------------------------------------------  |
  | `component`                    |      String    |  Sets `ui`                                                                      |
  | `fragmentName`                 |      String    |  Name of the fragment class Example: `MainFragment`                             |
</Accordion>


<Accordion title="App Start Monitoring">
  The app start monitoring feature creates spans each time the app undergoes a cold, warm, or hot start.

  - Cold starts occur when users open the app for the first time after booting the phone or terminating the app.

  - Hot starts take place when the system brings an app to the foreground. They are faster than cold starts as the app is already loaded.

  - Warm starts occur when some operations from a cold start are still in progress. Warm starts are quicker than cold starts but slower than hot starts.

  App start monitoring generates spans named AppStart with associated attributes:

  |         __Name__               |    __Type__    |                     __Description__                                             | 
  | :----------------------:       | :-------------:| :-----------------------------------------------------------------------------  |
  | `component`                    |      String    |  Sets `appstart`                                                                |
  | `start.type`                   |      String    |  Type of start. Value `cold`, `warm`, or `hot`                                  |
</Accordion>

<Note> Need assistance or want to learn more about Middleware? Contact us at support[at]middleware.io. </Note>